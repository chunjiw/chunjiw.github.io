<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/css/fonts.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/basic.css"> <link rel=icon  href="/assets/favicon.svg"> <title>我的私有服务器配置方案概述</title> <header> <div class=blog-name ><a href="/">CW Site</a></div> <nav> <ul> <li><a href="/">Home</a> <li><a href="/chinese/">中文</a> <li><a href="/english/">English</a> <li><a href="/about/">About</a> </ul> <img src="/assets/hamburger.svg" id=menu-icon > </nav> </header> <h2 class=franklin-content  style="text-align:center">我的私有服务器配置方案概述</h2> <p class=franklin-content  style="text-align:center">2021-09-05</p> <div class=franklin-content ><div class=franklin-toc ><ol><li><a href="#硬件">硬件</a><li><a href="#应用">应用</a><ol><li><a href="#智能家居_-_home_assistant">智能家居 - Home Assistant</a><li><a href="#云笔记_-_tiddlywiki">云笔记 - TiddlyWiki</a><li><a href="#云存储_-_seafile">云存储 - Seafile</a><li><a href="#云媒体_-_emby_jellyfin">云媒体 - Emby / Jellyfin</a><li><a href="#云相册_-_photoprism">云相册 - Photoprism</a><li><a href="#云日历和电话簿_-_baikal">云日历和电话簿 - Baikal</a></ol><li><a href="#感受">感受</a></ol></div> <hr /> <p>经过差不多一年半的折腾，目前我的私有服务器配置大致成型，基本没出过大问题，是时候写个概述了。</p> <h2 id="硬件"><a href="#硬件" class=header-anchor >硬件</a></h2> <ul> <li><p>4 x 树莓派 &#40;Raspberry Pi 3 or 4&#41; </p> <li><p>3 x 硬盘</p> </ul> <p>WiFi 和 Ethernet 相信大家至少会有一个，不必单独列出来了。</p> <p>其中四个树莓派其实大可不必，我目前的配置，两个到三个完全够用，用多个纯是因为方便。</p> <h2 id="应用"><a href="#应用" class=header-anchor >应用</a></h2> <ul> <li><p>智能家居 <a href="https://www.home-assistant.io/">Home Assistant</a></p> <li><p>云笔记 - <a href="https://tiddlywiki.com/">TiddlyWiki</a></p> <li><p>云存储 - <a href="https://www.seafile.com">Seafile</a></p> <li><p>云媒体 - <a href="https://emby.media/">Emby</a> / <a href="https://jellyfin.org/">Jellyfin</a></p> <li><p>云相册 - <a href="https://photoprism.app/">Photoprism</a></p> <li><p>云日历和电话簿 - <a href="https://github.com/sabre-io/Baikal/">Baikal</a> &#43; <a href="https://www.davx5.com/">DAVx<sup>5</sup></a></p> </ul> <h3 id="智能家居_-_home_assistant"><a href="#智能家居_-_home_assistant" class=header-anchor >智能家居 - Home Assistant</a></h3> <p>我用的是开源智能家居管理系统 Home Assistant OS。 Home Assistant 有软件版本和操作系统版本，我尝试了软件版本，发现功能不全，考虑到这个应用与其他应用不参合，就用了操作系统版本，安装在一个树莓派4上。</p> <p>我在家里几乎每扇窗上，和一些门上装了门窗传感器，实现的功能包括</p> <ul> <li><p>推送通知，如果院子或车库的门被打开</p> <li><p>推送通知，如果睡前或离开家的时候忘记关上重要门窗</p> </ul> <p>在一些开关中安装智能开关，使得我可以</p> <ul> <li><p>用手机查看开关状态，或者开关灯</p> <li><p>睡前自动关闭热水器，起床自动打开热水器</p> </ul> <p>在一些房间中安装了运动传感器，使得</p> <ul> <li><p>检测到运动后自动开灯</p> </ul> <p>其中细节应另做文章细述。</p> <h3 id="云笔记_-_tiddlywiki"><a href="#云笔记_-_tiddlywiki" class=header-anchor >云笔记 - TiddlyWiki</a></h3> <p>这是我最依赖的应用。 当初开始玩私有服务器，也是因为对这个应用的强烈需求。</p> <p>我用的是 TiddlyWiki，很奇怪的一个名字，它的特点是小巧却很多功能，有很多插件可以安装，安装过程十分简单。 最近需要使用任务管理工具，正好发现一个插件叫做 Projectify，一秒钟安装使用，爽歪歪。 缺点是没有专门的手机 App，不过可以用手机浏览器直接访问，也算方便吧。</p> <p>从去年 4 月开始到现在，积累了 3 MB 的笔记；这些笔记及其重要，绝对不能丢失，所以我设置了一个 cron job，每日自动备份到一个 git repo，确保万无一失。</p> <h3 id="云存储_-_seafile"><a href="#云存储_-_seafile" class=header-anchor >云存储 - Seafile</a></h3> <p>试验很多方案后决定使用 Seafile。</p> <p>说来有趣，Seafile 是北京海文互知的产品，已发展为国际化的开源项目。 这本身就是一件不易，了不起的事情：产品开源后受到广泛关注，意味着这个项目质量很高。 Seafile 现在好像都没有中文名字了，以前是叫海云云盘吗？我不确定。</p> <p>Seafile 的优点是快，可靠，对系统的要求低。缺点是安装不是很容易。 在它之前我尝试过 NextCloud，名声比 Seafile 大多了，但是在树莓派上根本就跑不起来，被我抛弃。</p> <h3 id="云媒体_-_emby_jellyfin"><a href="#云媒体_-_emby_jellyfin" class=header-anchor >云媒体 - Emby / Jellyfin</a></h3> <p>有超多的私有云媒体应用可供选择，我最终选择了两个：Emby 和 Jellyfin。</p> <p>Jellyfin 其实源于 Emby。Emby 采用 Freemium 模式，有一些功能要付费才能享用。 正是因为如此，一部分 Emby 开发者离开，创建了 Jellyfin，所以 Jellyfin 是完全开源的。</p> <p>两个都用，是因为 Jellyfin 还没有完全成熟，比如智能电视上没有 App，安卓的 App 很差； 而 Emby 免费版本又有各种限制。</p> <h3 id="云相册_-_photoprism"><a href="#云相册_-_photoprism" class=header-anchor >云相册 - Photoprism</a></h3> <p>Photoprism&#33;</p> <p>去年刚开始的时候到处找私人相册产品，总是没有能满意的。 我在乎的只是简单地把手机上的照片自动传到云相册，然后云相册看起来比较好看，仅此而已。 去年 Photoprism 还在开发中；今年已进入测试阶段，可以用！ 我已经把十多年的照片导入其中，看上去很漂亮。</p> <p>为了把手机上的照片自动上传，我用 <a href="https://syncthing.net/">Syncthing</a> 把照片同步到服务器。 其中涉及到照片的批处理和自动导入，应另做文章细述。</p> <p>Photoprism 作为谷歌相册的替代品，已经很令我满意了。</p> <h3 id="云日历和电话簿_-_baikal"><a href="#云日历和电话簿_-_baikal" class=header-anchor >云日历和电话簿 - Baikal</a></h3> <p>这两个东西简单却重要。我用的是 Baikal；在安卓手机上需要用一个叫做 DAVx<sup>5</sup> 的 App 完成同步。</p> <p>缺点是没有网络客户端，所以只能通过手机 App 或电脑程序来使用。</p> <h2 id="感受"><a href="#感受" class=header-anchor >感受</a></h2> <p>有时候会问自己，花好长时间做这些东西真的值得吗？ 毕竟每一个应用都可以用市场上已有的免费产品。 但是换个角度讲，无论什么事情都可不做，那么难道如此就什么都不做么？ 既然我从中获得乐趣，也就坦然乐此不疲吧。</p> <p>实际的好处也多多，再也不用受到他人的限制，比如 Evernote 限制最多两个客户端，谷歌照片限制分辨率和存储空间，都是我不用考虑的问题。 同时学到一些操作系统管理技能，时不时可以在工作中用到。</p> <div class=page-foot > <div class=copyright > &copy; Chunji Wang. Built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>. </div> </div> </div>